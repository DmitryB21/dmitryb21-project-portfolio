# Prometheus конфигурация для мониторинга Telegram Parser

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'telegram-parser'
    environment: 'production'

# Правила алертов
rule_files:
  - 'alerts.yml'

# Конфигурация сбора метрик
scrape_configs:
  # Flask приложение (web)
  - job_name: 'telegram-parser-web'
    static_configs:
      - targets: ['web:5000']
    metrics_path: '/metrics'
    scrape_interval: 10s

  # Huey worker
  - job_name: 'telegram-parser-worker'
    static_configs:
      - targets: ['worker:5001']  # Если worker экспортирует метрики
    scrape_interval: 15s

  # PostgreSQL
  - job_name: 'postgresql'
    static_configs:
      - targets: ['postgres-exporter:9187']
    scrape_interval: 30s

  # Redis
  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']
    scrape_interval: 15s

  # Node Exporter (системные метрики)
  - job_name: 'node'
    static_configs:
      - targets: ['node-exporter:9100']
    scrape_interval: 15s

  # cAdvisor (метрики Docker контейнеров)
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']
    scrape_interval: 15s

  # Qdrant (если есть экспортер)
  - job_name: 'qdrant'
    static_configs:
      - targets: ['qdrant-exporter:9090']
    scrape_interval: 30s

