# –ò—Ç–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

## ‚úÖ –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏: –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

**S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (MinIO):**
- ‚úÖ –í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: **120**
- ‚úÖ Bucket: `neuro-doc-docs`
- ‚úÖ Endpoint: `http://localhost:9000`

**PostgreSQL (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ):**
- ‚úÖ –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: **120**
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `neuro_doc_assistant`
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### üìÅ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
|-----------|----------------------|
| **compliance** | 9 |
| **hr** | 50 |
| **it** | 56 |
| **onboarding** | 5 |
| **–ò—Ç–æ–≥–æ** | **120** |

### üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã

1. **MinIO** (Docker) - S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: `neuro_doc_minio`
   - –ü–æ—Ä—Ç: 9000 (API), 9001 (Console)
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

2. **PostgreSQL** (Docker) - –ë–∞–∑–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: `neuro_doc_postgres`
   - –ü–æ—Ä—Ç: 5432
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

3. **Qdrant** (Docker) - –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
   - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: `qdrant`
   - –ü–æ—Ä—Ç: 6333
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

### üìù –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

1. ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –≤ PostgreSQL (`documents`, `chunks`, `experiments`)
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ `s3_key` –≤ —Ç–∞–±–ª–∏—Ü–µ `documents`
3. ‚úÖ –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ MinIO (S3)
4. ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤ PostgreSQL

### üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–û–±–Ω–æ–≤–∏—Ç—å DocumentLoader** –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ S3
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å PostgreSQL** –≤ ingestion pipeline
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ S3:**
```bash
python scripts/check_storage.py
```

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:**
```bash
python scripts/sync_metadata_to_postgres.py
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ PostgreSQL:**
```bash
docker exec neuro_doc_postgres psql -U neuro_doc_user -d neuro_doc_assistant -c "SELECT category, COUNT(*) FROM documents GROUP BY category;"
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ S3:**
```python
from app.storage.s3_storage import S3DocumentStorage
storage = S3DocumentStorage()
docs = storage.list_documents()
print(f"–î–æ–∫—É–º–µ–Ω—Ç–æ–≤: {len(docs)}")
```

### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –∏–∑ Python —Å–∫—Ä–∏–ø—Ç–æ–≤** - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `127.0.0.1`
   - **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sync_metadata_to_postgres.py` –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `docker exec`
   - **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å `DATABASE_URL` –≤ `.env` –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `localhost` –≤–º–µ—Å—Ç–æ `127.0.0.1`

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è](./storage_architecture.md)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](./storage_quick_start.md)
- [Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](../docker-compose.yml)

