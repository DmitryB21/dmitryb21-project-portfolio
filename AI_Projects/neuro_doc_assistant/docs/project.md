üß† Neuro_Doc_Assistant ‚Äî –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Neuro_Doc_Assistant ‚Äî RAG + Lightweight AI-Agent –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∫–æ–º–ø–∞–Ω–∏–∏.

–¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞:

–ü–æ—Å—Ç—Ä–æ–∏—Ç—å production-ready AI-–∞–≥–µ–Ω—Ç–∞, —Å–ø–æ—Å–æ–±–Ω–æ–≥–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å—Ç—Ä–æ–≥–æ –ø–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

–û–±–µ—Å–ø–µ—á–∏—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å R&D —Ü–∏–∫–ª —Å –∏–∑–º–µ—Ä—è–µ–º—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (Faithfulness, Precision@3, latency).

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤, –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —É–º–µ–Ω–∏–µ:

–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å AI-–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ–≤–µ—Ä—Ö LLM;

–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å LLM –≤ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã —á–µ—Ä–µ–∑ API;

–ø—Ä–æ–≤–æ–¥–∏—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –∏ –∏–∑–º–µ—Ä—è—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ RAG;

–¥–æ–≤–æ–¥–∏—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø –¥–æ production-ready —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è   | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                  | –†–æ–ª—å                                                    |
| ----------- | --------------------------- | ------------------------------------------------------- |
| LLM         | GigaChat API                | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤, reasoning, tool-calling              |
| Agent Layer | Lightweight Agent Layer     | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —à–∞–≥–æ–≤ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è            |
| Embeddings  | FRIDA / GigaChat Embeddings | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º             |
| Vector DB   | Qdrant (self-hosted)        | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| Backend     | FastAPI, AsyncIO            | REST API, –∞–≥–µ–Ω—Ç–Ω—ã–µ endpoint‚Äô—ã                           |
| Storage     | SberCloud Object Storage    | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤                            |
| Metadata DB | Managed PostgreSQL          | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã, –ª–æ–≥–∏                          |
| UI (Demo)   | Streamlit / Gradio          | Chat-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + –º–µ—Ç—Ä–∏–∫–∏                                |
| Evaluation  | RAGAS                       | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤                  |
| Monitoring  | Prometheus + Grafana        | Latency, QPS, –æ—à–∏–±–∫–∏                                    |


3. –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

### 3.1. Ingestion & Indexing

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è UC-1**:
- `data/NeuroDoc_Data/hr/` ‚Üí HR-–ø–æ–ª–∏—Ç–∏–∫–∏, –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `data/NeuroDoc_Data/it/` ‚Üí IT-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã, –≥–¥–µ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è SLA

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–¥—É–ª—è**:

1. **DocumentLoader** (`app/ingestion/loader.py`)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (PDF, DOCX, MD, TXT)
   - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (—É–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–¥–∏—Ä–æ–≤–æ–∫)
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è: hr/it/compliance)
   - **–ö–æ–Ω—Ç—Ä–∞–∫—Ç**: `load_documents(path: str) -> list[Document]`
     - `Document` —Å–æ–¥–µ—Ä–∂–∏—Ç: `text: str`, `metadata: dict[str, Any]`, `id: str`

2. **Chunker** (`app/ingestion/chunker.py`)
   - –†–∞–∑–±–∏–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–º 200‚Äì400 —Ç–æ–∫–µ–Ω–æ–≤ (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–µ–º–æ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ UC-6)
   - **–°—Ç—Ä–∞—Ç–µ–≥–∏—è overlap**: 20‚Äì30% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —á–∞–Ω–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ 300 —Ç–æ–∫–µ–Ω–∞—Ö overlap ‚âà 60‚Äì90 —Ç–æ–∫–µ–Ω–æ–≤)
   - –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä, —á—Ç–æ –∏ –º–æ–¥–µ–ª—å embeddings (GPT-style BPE –¥–ª—è GigaChat)
   - **–ö–æ–Ω—Ç—Ä–∞–∫—Ç**: `chunk_documents(documents: list[Document], chunk_size: int, overlap_percent: float = 0.25) -> list[Chunk]`
     - `Chunk` —Å–æ–¥–µ—Ä–∂–∏—Ç: `text: str`, `metadata: dict`, `chunk_id: str`, `doc_id: str`, `text_length: int`

3. **EmbeddingService** (`app/ingestion/embedding_service.py`)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ GigaChat Embeddings API
   - –ë–∞—Ç—á–∏–Ω–≥ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ throughput
   - **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤**: 1536 –∏–ª–∏ 1024 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏, —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
   - **–ö–æ–Ω—Ç—Ä–∞–∫—Ç**: `generate_embeddings(texts: list[str], model_version: str) -> list[list[float]]`
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–µ–∫—Ç–æ—Ä–æ–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏
     - –í–µ—Ä—Å–∏—è –º–æ–¥–µ–ª–∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

4. **QdrantIndexer** (`app/ingestion/indexer.py`)
   - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ Qdrant (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   - **–ò–º—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏**: `neuro_docs` (–æ–¥–Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
   - –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞–Ω–∫–æ–≤ —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤ Qdrant
   - **–ö–æ–Ω—Ç—Ä–∞–∫—Ç**: `index_chunks(chunks: list[Chunk], embeddings: list[list[float]], collection_name: str = "neuro_docs") -> None`
   - **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏ –≤ Qdrant**:
     - `id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–∞–Ω–∫–∞ (`chunk_id`)
     - `vector`: embedding –≤–µ–∫—Ç–æ—Ä (—Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
     - `payload`: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è):
       - `text`: —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞
       - `doc_id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
       - `chunk_id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–∞–Ω–∫–∞
       - `source`: –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (HR, IT, Compliance, etc.)
       - `created_at`: –≤—Ä–µ–º—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (datetime)
       - `text_length`: –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö (int)
       - `embedding_version`: –≤–µ—Ä—Å–∏—è –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è embeddings (string)
       - `metadata_tags`: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–≥–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä ["policy", "onboarding", "sla"] (list[str])
       - `experiment_id`: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥–æ–Ω—É

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö Ingestion**:
```
–ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã ‚Üí DocumentLoader ‚Üí —Å–ø–∏—Å–æ–∫ Document
    ‚Üì
Chunker ‚Üí —Å–ø–∏—Å–æ–∫ Chunk
    ‚Üì
EmbeddingService ‚Üí —Å–ø–∏—Å–æ–∫ –≤–µ–∫—Ç–æ—Ä–æ–≤
    ‚Üì
QdrantIndexer ‚Üí Qdrant –∫–æ–ª–ª–µ–∫—Ü–∏—è (–≥–æ—Ç–æ–≤–æ –¥–ª—è Retrieval Layer)
```

**–°–≤—è–∑—å —Å —Ç–µ—Å—Ç–∞–º–∏ UC-1**:
- –§–∏–∫—Å—Ç—É—Ä–∞ `prepared_vector_store` –≤ `tests/fixtures/vector_store.py` –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Ingestion pipeline –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ingestion pipeline –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `test_uc1_basic_search.py`

Metadata & Storage

–•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

Retrieval Layer

Semantic search –ø–æ Qdrant

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º

–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è K

Reranking (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ retrieved –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å / –±–µ–∑ reranking

Generation Layer

–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ prompt

–í—ã–∑–æ–≤ GigaChat API

–°—Ç—Ä–æ–≥–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ¬´–æ—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É¬ª

Evaluation & Metrics

–†–∞—Å—á—ë—Ç Precision@K

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RAGAS

–°–±–æ—Ä latency / throughput

Agent Layer

–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≥–æ–Ω–∞–º–∏

–§–∏–∫—Å–∞—Ü–∏—è DecisionLog

API & UI Layer

REST API (FastAPI)

Demo UI (Streamlit / Gradio)

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫

4. Use Cases –∏ —Å–≤—è–∑—å —Å –º–æ–¥—É–ª–µ–º –∞–≥–µ–Ω—Ç–∞

### 4.1. UC-1: –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (HR-–ø–æ–ª–∏—Ç–∏–∫–∏, IT-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, SLA —Å–µ—Ä–≤–∏—Å–æ–≤).

**–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª**: `tests/use_cases/test_uc1_basic_search.py`

**–§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ UC-1**:

#### –¢–µ—Å—Ç 1: `test_uc1_basic_search_returns_relevant_answer`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç (Given)**:
- –î–æ–∫—É–º–µ–Ω—Ç—ã —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º SLA –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Ingestion pipeline
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏: `data/NeuroDoc_Data/hr/` –∏ `data/NeuroDoc_Data/it/`
- –§–∏–∫—Å—Ç—É—Ä–∞ `prepared_vector_store` —Å–æ–∑–¥–∞—ë—Ç –≥–æ—Ç–æ–≤–æ–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Qdrant –∫–æ–ª–ª–µ–∫—Ü–∏—è)
- –§–∏–∫—Å—Ç—É—Ä–∞ `agent_client` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∞–≥–µ–Ω—Ç—É

**–î–µ–π—Å—Ç–≤–∏–µ (When)**:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å: `"–ö–∞–∫–æ–π SLA —É —Å–µ—Ä–≤–∏—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π?"`
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `agent_client.ask(query)`

**–ü—Ä–æ–≤–µ—Ä–∫–∏ (Then)**:
1. `response.answer is not None` ‚Üí –æ—Ç–≤–µ—Ç –Ω–µ –ø—É—Å—Ç–æ–π
2. `len(response.sources) > 0` ‚Üí –µ—Å—Ç—å –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫
3. `response.metrics["precision_at_3"] >= 0.8` ‚Üí Precision@3 ‚â• 80%

**–ö–æ–Ω—Ç—Ä–∞–∫—Ç API –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞**:
```python
class AgentResponse:
    answer: str                    # –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞
    sources: list[Source]          # –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—á–∞–Ω–∫–æ–≤)
    metrics: dict[str, float]      # –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

class Source:
    text: str                      # –¢–µ–∫—Å—Ç —á–∞–Ω–∫–∞
    id: str                        # –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–∞–Ω–∫–∞
    metadata: dict[str, Any]       # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (document_id, category, file_path)
```

**Acceptance Criteria**:
- Precision@3 ‚â• 80% –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ SLA –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
- –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (—á–µ—Ä–µ–∑ `response.sources`)
- –û—Ç–≤–µ—Ç –æ—Å–Ω–æ–≤–∞–Ω —Å—Ç—Ä–æ–≥–æ –Ω–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

#### –¢–µ—Å—Ç 2: `test_uc1_no_hallucinations`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç (Given)**: –¢–µ –∂–µ —É—Å–ª–æ–≤–∏—è, —á—Ç–æ –∏ –≤ —Ç–µ—Å—Ç–µ 1

**–î–µ–π—Å—Ç–≤–∏–µ (When)**: –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `agent_client.ask("–ö–∞–∫–æ–π SLA —É —Å–µ—Ä–≤–∏—Å–∞ –ø–ª–∞—Ç–µ–∂–µ–π?")`

**–ü—Ä–æ–≤–µ—Ä–∫–∏ (Then)**:
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ `source` –≤ `response.sources`: `source.text.lower() in response.answer.lower()`
- **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è**: –¢–µ–∫—Å—Ç –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–æ–ª–∂–µ–Ω –¥–æ—Å–ª–æ–≤–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –≤ –æ—Ç–≤–µ—Ç–µ (–∑–∞—â–∏—Ç–∞ –æ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π)

**Acceptance Criteria**:
- –û—Ç–≤–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö
- –û—Ç–≤–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ "–∑–∞–∑–µ–º–ª—ë–Ω" –Ω–∞ —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–±–ª–∏–∑–æ–∫ –∫ extractive QA)

**–°–≤—è–∑—å —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π**:
- **Ingestion & Indexing**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è UC-1 (HR + IT –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí Qdrant)
- **Retrieval Layer**: Semantic search –ø–æ Qdrant —Å K‚â•3 –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ Precision@3
- **Generation Layer**: –°—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è "–æ—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É")
- **Evaluation & Metrics**: –†–∞—Å—á—ë—Ç `precision_at_3` –∏ –∑–∞–ø–∏—Å—å –≤ `response.metrics`
- **Agent Layer**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π —á–µ—Ä–µ–∑ state machine (RETRIEVE ‚Üí GENERATE ‚Üí CALC_METRICS)

| UC   | –û–ø–∏—Å–∞–Ω–∏–µ                        | –í–∞–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏                                       |
| ---- | ------------------------------- | ----------------------------------------------------- |
| UC-1 | –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏        | Semantic search, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –ø–æ –Ω–∞–π–¥–µ–Ω–Ω—ã–º —á–∞–Ω–∫–∞–º, Precision@3 ‚â• 80%, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π |
| UC-2 | –£—Ç–æ—á–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞             | –ó–∞–ø—Ä–æ—Å —É—Ç–æ—á–Ω–µ–Ω–∏–π, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π retrieval                 |
| UC-3 | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º        | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ `MetadataFilter`                           |
| UC-4 | Reranking                       | –ü–æ–≤—ã—à–µ–Ω–∏–µ Precision@3 –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä—ë–º–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤   |
| UC-5 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö             |
| UC-6 | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª          | –§–∏–∫—Å–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫, –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤          |
| UC-7 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥                      | –°–±–æ—Ä –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è latency, QPS, –æ—à–∏–±–æ–∫              |
| UC-8 | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è                    | UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç, –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏              |


5. –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

| –ú–µ—Ç—Ä–∏–∫–∞                  | –¶–µ–ª—å           |
| ------------------------ | -------------- |
| End-to-end latency (p95) | < 1.3 —Å–µ–∫      |
| Retrieval latency (p95)  | < 200 –º—Å       |
| Precision@3              | ‚â• 80%          |
| RAG Faithfulness (RAGAS) | ‚â• 0.85         |
| Answer Relevancy (RAGAS) | ‚â• 0.80         |
| Indexing throughput      | ‚â• 1200 –¥–æ–∫/—á–∞—Å |

6. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª

–ö–∞–∂–¥–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º:

–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤ (200 / 300 / 400 —Ç–æ–∫–µ–Ω–æ–≤)

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ retrieved –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (K = 3 / 5 / 8)

–° reranking / –±–µ–∑ reranking

–†–∞–∑–Ω—ã–µ embedding-–º–æ–¥–µ–ª–∏

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

–ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ PostgreSQL

–≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ Grafana

–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞

7. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ (Decision Flow)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å ‚Üí IDLE ‚Üí VALIDATE_QUERY

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ–ø–æ–ª–Ω—ã–π ‚Üí REQUEST_CLARIFICATION

RETRIEVE ‚Üí METADATA_FILTER ‚Üí RERANK (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

GENERATE ‚Üí VALIDATE_ANSWER

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

DecisionLog —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ —à–∞–≥–∏

8. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**Test-first –ø–æ–¥—Ö–æ–¥**: —Å–Ω–∞—á–∞–ª–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ—Å—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ UC, –∑–∞—Ç–µ–º –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª–∏ –∏ –ø–∏—à–µ–º –∫–æ–¥

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- `/docs/project.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (source of truth)
- `/docs/agent_flow.md` ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ –∏ state machine
- `/docs/tasktracker.md` ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–¥–∞—á —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- `/docs/diary.md` ‚Äî –¥–Ω–µ–≤–Ω–∏–∫ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π –ø—Ä–æ–µ–∫—Ç–∞
- `/docs/qa.md` ‚Äî –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- `/docs/changelog.md` ‚Äî —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ª–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `/docs/requirements.md` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (—Ç–µ—Å—Ç—ã, architecture.md, agent_flow.md)

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: —Å—Ç—Ä–æ–≥–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (app/, tests/, docs/)

**–ü—Ä–æ—Ü–µ—Å—Å**: –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —à–∞–≥–æ–º ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª Cursor (`.cursor/rules/rules.md`)

**Roadmap —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** (test-first):
1. **–≠—Ç–∞–ø 0**: –§–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ UC-1 ‚úÖ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
2. **–≠—Ç–∞–ø 1**: Ingestion & Indexing module (tests first)
   - –¢–µ—Å—Ç—ã –¥–ª—è DocumentLoader, Chunker, EmbeddingService, QdrantIndexer
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏–∫—Å—Ç—É—Ä–æ–π `prepared_vector_store`
3. **–≠—Ç–∞–ø 2**: Retrieval Layer (tests first)
4. **–≠—Ç–∞–ø 3**: Generation Layer (tests first)
5. **–≠—Ç–∞–ø 4**: Evaluation & Metrics (tests first)
6. **–≠—Ç–∞–ø 5**: Agent Layer (tests first)
7. **–≠—Ç–∞–ø 6**: API & UI Layer

9. –ü—Ä–∞–≤–∏–ª–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

SOLID, KISS, DRY

–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ dead code –∏ –Ω–µ–Ω—É–∂–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ DecisionLog –∏ tasktracker.md

10. –†–µ–∑—é–º–µ

–ü—Ä–æ–µ–∫—Ç Neuro_Doc_Assistant ‚Äî —ç—Ç–æ –∏–∑–º–µ—Ä—è–µ–º–∞—è AI-—Å–∏—Å—Ç–µ–º–∞ —Å RAG, –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º –∏ —Å—Ç—Ä–æ–≥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∫–∞—á–µ—Å—Ç–≤–∞.
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

–ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–π

–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π execution flow

–ø–æ–¥–¥–µ—Ä–∂–∫—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

–í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º UC –∏ —Ç–µ—Å—Ç–∞–º.